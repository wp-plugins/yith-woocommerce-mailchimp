jQuery(document).ready(function(a){var d=a("#yith_wcmc_mailchimp_list"),l=a("#yith_wcmc_mailchimp_groups");d.after(a("<a>").addClass("button button-secondary ajax-mailchimp-updater ajax-mailchimp-updater-list").attr("id","yith_wmcm_mailchimp_list_updater").attr("href","#").text(yith_wcmc.labels.update_list_button));l.after(a("<a>").addClass("button button-secondary ajax-mailchimp-updater ajax-mailchimp-updater-group").attr("id","yith_wcmc_mailchimp_group_updater").attr("href","#").text(yith_wcmc.labels.update_group_button));
    var m=function(h){console.log("handle_list");var b=a(this),c=b.prev("select"),d=c.find("option:selected").val();h.preventDefault();a.ajax({beforeSend:function(){b.block({message:null,overlayCSS:{background:"#fff",opacity:.6}})},complete:function(){b.unblock()},data:{request:"lists/list",force_update:!0,args:{sort_field:"web"},action:yith_wcmc.actions.do_request_via_ajax_action,yith_wcmc_ajax_request_nonce:yith_wcmc.ajax_request_nonce},dataType:"json",method:"POST",success:function(a){var b="",e=0;
        if(0!=a.data.length)for(e in a.data)b+='<option value="'+a.data[e].id+'" '+(d==a.data[e].id?'selected="selected"':"")+" >"+a.data[e].name+"</option>";c.html(b);0==b.length?c.prop("disabled"):c.removeProp("disabled")},url:ajaxurl})},f=function(d){var b=a(this).hasClass("ajax-mailchimp-updater-group")?a(this).prev("select"):a(this).parents("tr").next().find("select"),c=b.parents("td"),f=b.parents("tr").prev().find("select").find("option:selected").val(),k=[];b.find("option:selected").each(function(b,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             e){k[b]=a(e).val()});d.preventDefault();0==f.length?b.prop("disabled"):b.removeProp("disabled");a.ajax({beforeSend:function(){c.block({message:null,overlayCSS:{background:"#fff",opacity:.6}})},complete:function(){c.unblock()},data:{request:"lists/interest-groupings",force_update:!0,args:{id:f},action:yith_wcmc.actions.do_request_via_ajax_action,yith_wcmc_ajax_request_nonce:yith_wcmc.ajax_request_nonce},dataType:"json",method:"POST",success:function(c){var e="",d=0;if(0!=c.length)for(d in c){var f=
        0,g=c[d];if(0!=g.groups.length)for(f in g.groups)var h=g.groups[f],e=e+('<option value="'+g.id+"-"+h.name+'" '+(-1<a.inArray(g.id+"-"+h.name,k)?'selected="selected"':"")+" >"+g.name+" - "+h.name+"</option>")}console.log(e);b.html(e);0==e.length?b.prop("disabled"):b.removeProp("disabled");b.select2()},url:ajaxurl})},d=function(){a(document).off("click",".ajax-mailchimp-updater-list");a(document).off("click",".ajax-mailchimp-updater-group");a(document).off("change",".list-select");a(document).on("click",
        ".ajax-mailchimp-updater-list",m);a(document).on("click",".ajax-mailchimp-updater-group",f);a(document).on("change",".list-select",f)};d();a("body").on("add_updater_handler",d);a("#yith_wcmc_checkout_trigger").on("change",function(){var d=a(this),b=a("#yith_wcmc_subscription_checkbox"),c=a("#yith_wcmc_double_optin");"never"!=d.val()?(b.parents("tr").show(),c.parents("tr").show(),a("#yith_wcmc_subscription_checkbox_label").parents("tr").show(),a("#yith_wcmc_subscription_checkbox_position").parents("tr").show(),
        a("#yith_wcmc_subscription_checkbox_default").parents("tr").show(),a("#yith_wcmc_mailchimp_list").parents("tr").show(),a("#yith_wcmc_update_existing").parents("tr").show(),a("#yith_wcmc_send_welcome").parents("tr").show(),b.change(),c.change()):(b.parents("tr").hide(),c.parents("tr").hide(),a("#yith_wcmc_subscription_checkbox_label").parents("tr").hide(),a("#yith_wcmc_subscription_checkbox_position").parents("tr").hide(),a("#yith_wcmc_subscription_checkbox_default").parents("tr").hide(),a("#yith_wcmc_mailchimp_list").parents("tr").hide(),
        a("#yith_wcmc_update_existing").parents("tr").hide(),a("#yith_wcmc_send_welcome").parents("tr").hide())}).change();a("#yith_wcmc_subscription_checkbox").on("change",function(){a(this).is(":checked")?(a("#yith_wcmc_subscription_checkbox_label").parents("tr").show(),a("#yith_wcmc_subscription_checkbox_position").parents("tr").show(),a("#yith_wcmc_subscription_checkbox_default").parents("tr").show()):(a("#yith_wcmc_subscription_checkbox_label").parents("tr").hide(),a("#yith_wcmc_subscription_checkbox_position").parents("tr").hide(),
        a("#yith_wcmc_subscription_checkbox_default").parents("tr").hide())}).change();a("#yith_wcmc_double_optin").on("change",function(){a(this).is(":checked")?a("#yith_wcmc_send_welcome").parents("tr").hide():a("#yith_wcmc_send_welcome").parents("tr").show()}).change()});